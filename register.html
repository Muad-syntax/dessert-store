<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register - Dessert Store</title>
    <link rel="stylesheet" href="style/register.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Coiny&family=Hanken+Grotesk:ital,wght@0,100..900;1,100..900&display=swap"
        rel="stylesheet">
</head>

<body class="auth-body">
    <div class="auth-card">
        <img src="images/Momochi.png" alt="Logo" class="auth-logo">
        <h2>Daftar Akun Baru</h2>
        <p>Bergabunglah dengan Dessert Store</p>

        <form id="register-form" class="auth-form">
            <input type="email" id="reg-email" placeholder="Masukkan Email" required>
            <input type="password" id="reg-password" placeholder="Buat Password (min. 6 huruf)" required>
            <button type="submit" class="btn-auth">Daftar</button>
        </form>

        <p class="auth-link">Sudah punya akun? <a href="login.html">Login di sini</a></p>
        <p class="auth-link"><a href="index.html" class="back-link">&larr; Kembali ke Beranda</a></p>
    </div>

    
        <script type="module">
        // Menggunakan versi 10.8.1 yang valid
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";
        import { getAuth, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-auth.js";

        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDLN4WbDZTun-DyYxRNcTQvgxf5Jww_Dcg",
            authDomain: "dessert-store-dab4d.firebaseapp.com",
            projectId: "dessert-store-dab4d",
            storageBucket: "dessert-store-dab4d.firebasestorage.app",
            messagingSenderId: "718001093765",
            appId: "1:718001093765:web:c7f8d97567cfcad0517dec"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);

        const registerForm = document.getElementById('register-form');

        // TYPO DIPERBAIKI: 'submit'
        registerForm.addEventListener('submit', (e) => {
            e.preventDefault();

            const email = document.getElementById('reg-email').value;
            const password = document.getElementById('reg-password').value;

            // TYPO DIPERBAIKI: createUserWithEmailAndPassword
            createUserWithEmailAndPassword(auth, email, password)
                .then((userCredential) => {
                    alert("Berhasil Membuat Akun. Silahkan Login!");
                    window.location.href = "login.html";
                })
                .catch((error) => {
                    alert("Gagal mendaftar: " + error.message);
                });
        });
    </script>
</body>

</html>